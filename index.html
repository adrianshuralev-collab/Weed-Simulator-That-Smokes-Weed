<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–°–∏–º—É–ª—è—Ç–æ—Ä –¢—Ä–∞–≤—ã, –ö–æ—Ç–æ—Ä–∞—è –ö—É—Ä–∏—Ç –¢—Ä–∞–≤—É</title>

<style>
body {
    margin: 0;
    font-family: "Comic Sans MS", Arial, sans-serif;
    background: radial-gradient(circle at center, #163516, #000);
    color: #b5ffb5;
    overflow: hidden;
    transition: filter 1s, transform 1s;
}

#game {
    max-width: 700px;
    margin: auto;
    padding: 20px;
    text-align: center;
}

h1 {
    font-size: 2em;
    animation: wobble 4s infinite;
}

/* ===== –°–ü–†–ê–ô–¢ –¢–†–ê–í–´ ===== */

#weed {
    display: flex;
    justify-content: center;
    margin: 25px 0;
}

.weed-pile {
    position: relative;
    width: 140px;
    height: 120px;
    animation: breathe 3s infinite ease-in-out;
}

.weed-leaf {
    position: absolute;
    width: 60px;
    height: 60px;
    background: radial-gradient(circle, #4caf50, #1b5e20);
    border-radius: 50% 50% 40% 40%;
    transform-origin: bottom center;
}

.leaf1 { left: 5px;  bottom: 10px; transform: rotate(-20deg); }
.leaf2 { left: 40px; bottom: 5px;  transform: rotate(5deg); }
.leaf3 { left: 75px; bottom: 15px; transform: rotate(25deg); }

.joint {
    position: absolute;
    width: 40px;
    height: 8px;
    background: linear-gradient(to right, #caa472, #fff);
    border-radius: 4px;
    bottom: 40px;
    left: 85px;
    transform: rotate(-20deg);
    opacity: 0.7;
}

.smoke {
    position: absolute;
    width: 12px;
    height: 12px;
    background: rgba(200,200,200,0.6);
    border-radius: 50%;
    left: 110px;
    bottom: 60px;
    animation: smoke 2s infinite ease-out;
}

/* ===== UI ===== */

button {
    padding: 12px 18px;
    margin: 6px;
    font-size: 1em;
    background: #2f6f2f;
    color: #eaffea;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: transform 0.3s;
}

button:hover {
    transform: scale(1.1) rotate(1deg);
}

.stat {
    font-size: 1.1em;
    margin: 5px;
}

#log {
    margin-top: 15px;
    height: 130px;
    overflow-y: auto;
    font-size: 0.9em;
    opacity: 0.9;
}

/* ===== –ê–ù–ò–ú–ê–¶–ò–ò ===== */

@keyframes breathe {
    0% { transform: scale(1); }
    50% { transform: scale(1.08); }
    100% { transform: scale(1); }
}

@keyframes smoke {
    0%   { transform: translateY(0) scale(1); opacity: 0.7; }
    100% { transform: translateY(-40px) scale(2); opacity: 0; }
}

@keyframes wobble {
    0% { transform: rotate(0deg); }
    25% { transform: rotate(1deg); }
    50% { transform: rotate(-1deg); }
    75% { transform: rotate(1deg); }
    100% { transform: rotate(0deg); }
}

/* ===== –ê–î–ê–ü–¢–ò–í ===== */

@media (max-width: 600px) {
    h1 { font-size: 1.5em; }
    button { padding: 10px 14px; font-size: 0.9em; margin: 4px; }
    .weed-pile { width: 100px; height: 90px; }
    .weed-leaf { width: 45px; height: 45px; }
    .joint { width: 30px; height: 6px; left: 60px; bottom: 30px; }
    .smoke { width: 10px; height: 10px; left: 75px; bottom: 45px; }
    .stat { font-size: 1em; }
}
</style>
</head>

<body>
<div id="game">
    <h1>üåø –°–∏–º—É–ª—è—Ç–æ—Ä –¢—Ä–∞–≤—ã, –ö–æ—Ç–æ—Ä–∞—è –ö—É—Ä–∏—Ç –¢—Ä–∞–≤—É</h1>

    <div id="weed">
        <div class="weed-pile">
            <div class="weed-leaf leaf1"></div>
            <div class="weed-leaf leaf2"></div>
            <div class="weed-leaf leaf3"></div>
            <div class="joint"></div>
            <div class="smoke"></div>
        </div>
    </div>

    <div class="stat">–î–æ—Ñ–∞–º–∏–Ω: <span id="dopamine">0</span></div>
    <div class="stat">–£—Ä–æ–≤–µ–Ω—å –Ω–∞–∫—É—Ä–µ–Ω–Ω–æ—Å—Ç–∏: <span id="highness">0</span></div>
    <div class="stat">–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏: <span id="reality">100%</span></div>

    <button id="smokeBtn">–ö—É—Ä–∏—Ç—å —Ç—Ä–∞–≤—É</button>
    <button id="upgradeBtn">–ö—É–ø–∏—Ç—å —É–ª—É—á—à–µ–Ω–∏–µ (–ø–ª–æ—Ö–∞—è –∏–¥–µ—è)</button>
    <button id="thinkBtn">–ü–æ–¥—É–º–∞—Ç—å –æ —á—ë–º-—Ç–æ –≥–ª—É–±–æ–∫–æ–º</button>

    <div id="log"></div>
</div>

<script>
let dopamine = 0;
let highness = 0;
let reality = 100;

const logBox = document.getElementById("log");

// ===== –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ =====
const isMobile = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
if(isMobile) document.body.classList.add("mobile");

function log(msg) {
    const el = document.createElement("div");
    el.innerText = msg;
    logBox.prepend(el);
}

const thoughts = [
    "–ë—Ä–æ‚Ä¶ –∞ –≤–¥—Ä—É–≥ —è —Å–∞–º ‚Äî –∫–æ—Å—è–∫?",
    "–ó–∞—á–µ–º –º–Ω–µ –±–æ–ª—å—à–µ —Ç—Ä–∞–≤—ã, –µ—Å–ª–∏ —è –∏ –µ—Å—Ç—å —Ç—Ä–∞–≤–∞?",
    "–î—ã–º –∑–Ω–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ.",
    "–¶–∏—Ñ—Ä—ã –∫–∞–∫–∏–µ-—Ç–æ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ.",
    "–¢—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∫–ª–∏–∫–∞–µ—à—å?",
    "–†–∞–Ω—å—à–µ —ç—Ç–æ –∫–∞–∑–∞–ª–æ—Å—å —Ö–æ—Ä–æ—à–µ–π –∏–¥–µ–µ–π."
];

function updateUI() {
    document.getElementById("dopamine").innerText = Math.floor(dopamine);
    document.getElementById("highness").innerText = highness;
    document.getElementById("reality").innerText = Math.max(0, Math.floor(reality)) + "%";

    document.body.style.filter =
        `blur(${Math.min(highness * 0.25, 6)}px)
         hue-rotate(${highness * 6}deg)
         saturate(${1 + highness * 0.1})`;

    document.body.style.transform =
        `rotate(${Math.sin(highness / 4) * 0.5}deg)`;

    const pile = document.querySelector(".weed-pile");
    pile.style.transform =
        `rotate(${Math.sin(highness / 3) * highness * 0.4}deg)
         scale(${1 + highness * 0.015})`;
}

function smoke(auto=false) {
    dopamine += Math.random() * (4 + highness);
    highness++;
    reality -= Math.random() * 2;

    const joint = document.querySelector(".joint");
    joint.style.opacity = "1";
    setTimeout(() => joint.style.opacity = "0.6", 300);

    log(auto
        ? "–¢—Ä–∞–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫—É—Ä–∏–ª–∞. –¢—ã –ø—Ä–æ—Å—Ç–æ —Å–º–æ—Ç—Ä–µ–ª."
        : "–¢—Ä–∞–≤–∞ –ø–æ–∫—É—Ä–∏–ª–∞ —Ç—Ä–∞–≤—É. –û–ø—è—Ç—å.");

    if (highness % 5 === 0) {
        log("–¢—Ä–∞–≤–∞ –≥–æ–≤–æ—Ä–∏—Ç: ¬´" +
            thoughts[Math.floor(Math.random()*thoughts.length)] +
            "¬ª");
    }

    updateUI();
}

function upgrade() {
    if (dopamine < 20) {
        log("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ—Ñ–∞–º–∏–Ω–∞. –¢—Ä–∞–≤–∞ –ø–æ–∂–∏–º–∞–µ—Ç –ª–∏—Å—Ç—å—è–º–∏.");
        return;
    }
    dopamine -= 20;
    highness += Math.floor(Math.random() * 3);
    reality -= 10;
    log("–û—Ç–∫—Ä—ã—Ç–æ —É–ª—É—á—à–µ–Ω–∏–µ: –ü–ª–æ—Ö–∏–µ –†–µ—à–µ–Ω–∏—è v" + highness);
    updateUI();
}

function think() {
    if (Math.random() < 0.5) {
        dopamine += 2;
        log("–¢—ã –≥–ª—É–±–æ–∫–æ –ø–æ–¥—É–º–∞–ª. –≠—Ç–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ.");
    } else {
        highness++;
        reality -= 5;
        log("–†–∞–∑–º—ã—à–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤—Å—ë –∏—Å–ø–æ—Ä—Ç–∏–ª–∏.");
    }
    updateUI();
}

/* –ö–Ω–æ–ø–∫–∏ –∏–Ω–æ–≥–¥–∞ —Ç–µ–±—è –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç */
document.getElementById("smokeBtn").onclick = () => {
    if (Math.random() < highness * 0.05) {
        log("–¢—Ä–∞–≤–∞ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∞ —Ç–µ–±—è.");
        smoke(true);
    } else {
        smoke();
    }
};

document.getElementById("upgradeBtn").onclick = upgrade;
document.getElementById("thinkBtn").onclick = think;

/* –ê–≤—Ç–æ–∫—É—Ä–µ–Ω–∏–µ (idle) */
setInterval(() => {
    if (Math.random() < 0.3 + highness * 0.02) {
        smoke(true);
    }
}, 4000);

/* –ö–æ–ª–ª–∞–ø—Å —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ */
setInterval(() => {
    if (reality <= 0) {
        document.body.innerHTML =
            "<h1 style='text-align:center;margin-top:40vh;'>–°–ª–∏—à–∫–æ–º –Ω–∞–∫—É—Ä–µ–Ω–æ, —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å—Å—è.</h1>";
    }
}, 3000);

log("–¢—Ä–∞–≤–∞ –æ—Å–æ–∑–Ω–∞–ª–∞ —Å–µ–±—è. –û—à–∏–±–∫–∏ –±—ã–ª–∏ –¥–æ–ø—É—â–µ–Ω—ã.");
updateUI();
</script>
</body>
</html>
